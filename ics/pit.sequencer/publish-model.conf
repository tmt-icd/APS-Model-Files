subsystem=APS
component=ICS.PIT.Sequencer
publish {
	description = "Event publishing from the PIT loop"

	events = [
    
        {
			name=status
			description="""PIT Loop Status"""
			maxRate = 1
			archive=true
            category=STATUS
			attributes=[
				{
					name=pitLoopState
					description="""State of the PIT Loop"""
					enum=["STOPPED", "NOTCONVERGED", "TILTPLATEOFFLOADING", "CONVERGED"]
				}
				{
					name=pupilXRegistrationError
					description="""Calculated Pupil X Registration Error at M1"""
					type=double
                    units=meter
				}
				{
					name=pupilYRegistrationError
					description="""Calculated Pupil Y Registration Error at M1"""
					type=double
                    units=millimeter
				}
				{
					name=pupilRotationError
					description="""Calculated Pupil Rotation Error"""
					type=double
                    units=millimeter
				}
				{
					name=pupilScaleError
					description="""Calculated Pupil Scale Error"""
					type=double
                    units=percent
				}
                {
 					name=imageXTranslationError
					description="""Calculated Image X Translation Error"""
					type=integer
                    units=pix
               
                }
                {
 					name=imageYTranslationError
					description="""Calculated Image Y Translation Error"""
					type=integer
                    units=pix
               
                }
				{
					name=kMirrorCorrectionCommand
					description="""Calculated KMirror Correction Command"""
					type=double
                    units=degree
				}
				{
					name=tiltPlateXCorrectionCommand
					description="""Calculated Tilt Plate X Correction Command"""
					type=double
                    units=millimeter
				}
				{
					name=tiltPlateYCorrectionCommand
					description="""Calculated Tilt Plate Y Correction Command"""
					type=double
                    units=millimeter
				}
				{
					name=collimatorUnitScaleCorrectionCommand
					description="""Calculated CollimatorUnit Scale Correction Command"""
					type=double
                    units=millimeter
				}
 				{
					name=telescopeXOffsetCommand
					description="""Calculated Telescope X Offset in APT Pixels Command"""
					type=integer
                    units=pix
				}
				{
					name=telescopeYOffsetCommand
					description="""Calculated Telescope Y Offset in APT Pixels Command"""
					type=integer
                    units=pix
				}
            ]
        }
        {
			name=pitLoopMetrics
			description="""PIT Loop sequence metrics for a single loop execution"""
			maxRate = 1
            category=STATUS
			archive=true
			attributes=[
				{
					name=pitExposureStartTime
					description="""Start time for taking a PIT exposure in the PIT loop"""
					type=taiDate
				}
				{
					name=pitExposureCompletedTime
					description="""Completion time for taking a PIT exposure in the PIT loop"""
					type=taiDate
				}
				{
					name=pitImageTransferStartTime
					description="""PIT image transfer from HCD to computation assembly start time"""
					type=taiDate
				}
				{
					name=pitImageTransferCompletedTime
					description="""PIT image transfer from HCD to computaion assembly completion time"""
					type=taiDate
				}
				{
					name=pitComputationsStartTime
					description="""PIT loop computations start time"""
					type=taiDate
				}
				{
					name=pitComputationsCompletedTime
					description="""PIT loop computations completed time"""
					type=taiDate
				}
				{
					name=icsComponentsCmdsStartTime
					description="""Start time of ICS Components commands"""
					type=taiDate
				}
				{
					name=icsComponentsCmdsCompletedTime
					description="""ICS Components commands completed time"""
					type=taiDate
				}
				{
					name=tcsCmdsStartTime
					description="""Start time of TCS command sent"""
					type=taiDate
				}
				{
					name=tcsCmdsCompletedTime
					description="""Completed time of TCS command"""
					type=taiDate
				}
			]
		}

    ]
}
